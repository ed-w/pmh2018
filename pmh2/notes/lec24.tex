\section{2018-05-29 Lecture}

\begin{prop}[4.4]
  Let $A$ be a finitely generated $R$-module which is also an $R$-algebra.
  Then it is a finitely generated $R$-algebra which is generated by integral elements.
\end{prop}

\begin{proof}
  $A$ is a finitely generated $R$-module and for $x \in A$ we have that $A$ is a faithful ($R'=\ang{R,x}$)-module containing $1_A$.
  Then by proposition 4.2 $A$ is integral over $R$.
\end{proof}

\begin{prop}[4.5]
  Let $R \subseteq R' \subseteq R''$ be subrings with $R'$ integral over $R$ and $R''$ integral over $R'$.
  Then $R''$ is integral over $R$.
\end{prop}

\begin{proof}
  If $x \in R''$ then we have $x^n+a_nx^{n-1}+\cdots+a_1=0$ for some $a_i \in R'$.
  Then $\ang{a_1,\ldots,a_n}_R$ is finitely generated as an $R$-module by proposition 4.3 and $\ang{a_1,\ldots,a_n,x}_R$ is finitely generated as an $\ang{a_1,\ldots,a_n}_R$-module.
  Therefore $\ang{a_1,\ldots,z_n,x}_R$ is finitely generated as an $R$-module, so $x$ is integral over $R$.
\end{proof}

\begin{prop}[4.6]
  Let $S \subseteq R$ be a subring.
  Then the elements of $R$ that are integral over $S$ form a subring.
\end{prop}

\begin{proof}
  Let $x$ and $y$ be integral over $S$.
  Then by proposition 4.3 $\ang{x,y}_S$ is a finitely generated $S$-module and also a module for $\ang{x \pm y}_S$ and $\ang{xy}_S$ and is faithful for both.
\end{proof}

\begin{defn}[4.7]
  The subring of elements of $R$ that are integral over a subring $S$ is called the \textbf{integral closure} of $S$ in $R$.
\end{defn}

\begin{rmk}
  For an integral domain $R$, the integral closure of $R$ is the integral closure of $R$ over $\Frac R$.
\end{rmk}

\begin{defn}[4.8]
  An integral domain $R$ is called \textbf{integrally closed} or \textbf{normal} if it is equal to its integral closure.
\end{defn}

\begin{prop}[4.9]
  Let $R \subseteq R'$ be a subring and denote by $\ol R$ the integral closure of $R$ in $R'$.
  Let $S \subseteq R$ be a multiplicative set.
  Then $S\inv\ol R$ is the integral closure of $S\inv R$ in $S\inv R'$.
\end{prop}

\begin{proof}
  This is a straightforward check.
\end{proof}

\begin{cor}[4.10]
  Let $R \subseteq R'$ be a subring and $S \subseteq R$ be a multiplicative set.
  If $R$ is equal to its integral closure in $R'$ then so is $S\inv R$ in $S\inv R'$.
\end{cor}

\begin{prop}[4.11]
  If $R$ is an integral domain then being normal is a local property.
\end{prop}

\begin{proof}
  $\implies$:
  Let $k = \Frac R$.
  If $R \subseteq k$ is normal, then by corollary 4.10 $R_\kp \subseteq k_\kp=k$ is normal.
  
  $\impliedby$:
  Assume $R_\kp \subseteq k$ is normal for all $\kp \in \Spec R$.
  Let $\ol R$ be the integral closure of $R$ in $k$.
  Since $(\ol R)_\kp = \ol{(R_\kp)}$, we have that $R_\kp \isoto (\ol R)_\kp$ is an isomorphism.
  Since isomorphism is a local property, we have $R \isoto \ol R$.
\end{proof}

\begin{thm}[4.12, Noether normalisation theorem]
  Let $A$ be a finitely generated $k$-algebra.
  Then there exists a $k$-subalgebra $R \subseteq A$ such that
  \begin{enum}
    \io $R \cong k[x_1,\ldots,x_n]$ for some $n$, and
    \io $A$ is a finitely generated $R$-module.
  \end{enum}
\end{thm}

\begin{proof}
  Let $A=\ang{a_1,\ldots,a_m}_k$ be the subalgebra of $A$ generated by $a_1,\ldots,a_m$.
  If the $a_i$s are algebraically independent over $k$ then we can take $R=A$.
  Otherwise, assume that there exists a subalgebra $A_1=\langle a_1^{(1)},\ldots,a_{m-1}^{(1)} \rangle_k$ such that $A$ is a finitely generated $A_1$-module.
  (This is lemma 4.13).
  Then we proceed inductively until we reach an $A_r=\langle a_1^{(r)},\ldots,a_{m-r}^{(r)} \rangle_k$ such that the $a_i^{(r)}$s are finitely generated and so $A$ is finitely generated as an $A_r$-module.
\end{proof}

\begin{lem}[4.13]
  Let $A$ be a finitely generated $k$-algebra generated by $x_1,\ldots,x_n$ such that $x_1,\ldots,x_d$ is a maximal subset of algebraically independent generators.
  If $n \neq d$ then there exists an $m \in \NN$ such that $A$ is a finitely generated module over the subalgebra generated by $\{x_1-x_n^m,\ldots,x_d-x_n^{m^d},x_{d+1},\ldots,x_{n-1}\}$.
\end{lem}
