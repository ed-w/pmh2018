\section{2018-04-24 Lecture}

\begin{prop}[2.6]
  $S\inv(-)$ is exact, that is
  \[M' \xto{f} M \xto{g} M''\]
  is an exact sequence of $R$-modules, then
  \[S\inv M' \xto{S\inv f} S\inv M \xto{S\inv g} S\inv M''\]
  is an exact sequence of $R$-modules or $S\inv R$-modules.
\end{prop}

\begin{proof}
  $S\inv f$ is defined via the diagram
  \[\begin{tikzcd}
    M' \arrow[rd, "\iota_S \circ f"'] \arrow[r, "\iota_S"] & S\inv M' \arrow[d, "\exists ! S\inv f"] \\
     & S\inv M
  \end{tikzcd}\]
  where $(S\inv f)(m/s) = f(m)/s$.
  $S\inv g$ is defined analogously.
  Then $(S\inv g) \circ (S\inv f) (m/s) = (g \circ f)(m)/s = 0$, so $\im S\inv f \subseteq \ker S\inv g$.
  Now let $m/s \in \ker S\inv g$.
  Then $g(m)/s = 0 \in S\inv M''$, so there exists a $u \in S$ such that $ug(m)=g(um)=0$.
  That is, $um \in \ker g = \im f$, so there exists an $m' \in M'$ such that $um=f(m')$.
  So there exists a $u \in S$ and an $m \in M'$ such that $m/s = f(m')/(us) = (S\inv f)(m/(us))$ in $S\inv M$.
  Then $\ker S\inv g \subseteq \im S\inv f$.
\end{proof}

\begin{rmk}
  $S\inv(-)$ preserves injectivity, so if $M'$ is a submodule of $M$, then $S\inv M'$ is a submodule of $S\inv M$.
\end{rmk}

\begin{cor}
  Let $N$ and $P$ be submodules of $M$.
  Then we have the following:
  \begin{enum}
    \io $S\inv(N+P)=S\inv N + S\inv P$
    \io $S\inv(N \cap P) = S\inv N \cap S\inv P$
    \io $S\inv(M/N) \cong S\inv M / S\inv N$ as both $R$-modules and $S\inv R$-modules.
  \end{enum}
\end{cor}

\begin{proof}
  (1) and (2) are just calculations.
  (3) follows from applying $S\inv$ to the exact sequence
  \[0 \to N \to M \to M/N \to 0\]
  and using the first isomorphism theorem.
\end{proof}

\begin{prop}[2.8]
  Let $\{M_i\}_{i \in I}$ be a family of $R$-modules.
  Then
  \[S\inv\left( \bigoplus_{i \in I} M_i \right) \cong \bigoplus_{i \in I} S\inv M_i.\]
\end{prop}

\begin{proof}
  There are maps $i_l: M_l \to \bigoplus_{i \in I} M_i$.
  Then applying $S\inv$ gives maps
  \[f_l: S\inv M_l \to S\inv \left( \bigoplus_{i \in I} M_i \right)\]
  for all $l$.
  Then there exists a unique map $\phi$ such that the following diagram commutes:
  \[\begin{tikzcd}
    \ds \bigoplus_{i \in I} S\inv M_i \arrow[r, "\phi"] & \ds S\inv \left( \bigoplus_{i \in I} M_i \right) \\
     & S\inv M_l \arrow[lu, "i_l'"] \arrow[u, "f_l"']
  \end{tikzcd}\]
  In the other direction, we have maps
  \[g_l: M_l \xto{\iota_S} S\inv M_l \xto{i_l'} \bigoplus_{i \in I} S\inv M_i\]
  so that there exists a unique map $\ol g$ such that the following diagram commutes:
  \[\begin{tikzcd}
      \ds \bigoplus_{i \in I} M_i \ar[r, "\ol g"] & \ds \bigoplus_{i \in I} S\inv M_i \\
      & M_l \ar[ul, "i_l"] \ar[u, "g_l"']
  \end{tikzcd}\]
  Then by the definition of localisation of a map there exists a unique map $\psi$ such that the following diagram commutes:
  \[\begin{tikzcd}
    \ds \bigoplus_{i \in I} S\inv M_i & \ds S\inv \left( \bigoplus_{i \in I} M_i \right) \arrow[l, "\psi"'] \\
     & \ds \bigoplus_{i \in I} M_i \arrow[lu, "\ol g"] \arrow[u, "\iota_S"']
  \end{tikzcd}\]
  We now check that $\phi$ and $\psi$ are inverses of each other.
  We have
  \[\phi\circ\psi(\iota_S\circ i_l(m_l)) = \phi(\ol g \circ i_l(m_l)) = \phi(i_l' \circ \iota_S(m_l)) = f_l \circ \iota_S(m_l) = \iota_S \circ i_l(m_l).\]
  since $S\inv i_l = f_l$.
  We will omit the proof of the other composition.
\end{proof}

\begin{rmk}
  This shows $S\inv$ commutes with direct sums and finite direct products.
  It does not commute with infinite direct products (in general).
  Here is a counterexample.

  Let $R=\ZZ$, $S=\ZZ \setminus \{0\}$ and $M_l = \ZZ/l\ZZ$ for $l \geq 2$.
  Then $S\inv M_l=0$ since
  \[\frac{x}{s} = \frac{lx}{ls} = \frac{0}{ls} = \frac{0}{1}\]
  which implies that
  \[\prod_{l \geq 2} S\inv M_l = 0.\]
  Now take
  \[x=\frac{(\bar 1, \bar 1, \bar 1, \ldots)}{1} \in S\inv \left( \prod_{i \geq 2} M_i \right).\]
  Assume $x = 0$.
  Then there exists a $u \in \ZZ \setminus \{0\}$ such that for all $l \geq 2$ we have $u \cdot \bar 1 = 0$ in $M_l$.
  Then we have $l \mid u$ for al $l \geq 2$, a contradiction.
\end{rmk}

\begin{prop}
  Let $M$ be an $R$-module.
  Then there exists an isomorphism of $R$-modules:
  \begin{align*}
    f: S\inv R \otimes_R M &\isoto S\inv M \\
    \frac{x}{s} \otimes_R m &\mapsto \frac{xm}{s}
  \end{align*}
\end{prop}

\begin{proof}
  Define
  \begin{align*}
    \wt f: S\inv R \times M &\to S\inv M \\
    \left( \frac{x}{s}, m \right) &\mapsto \frac{xm}{s}
  \end{align*}
  We will omit the easy check that $\wt f$ is bilinear.
  Then there exists a map $f$ which maps $x/s \otimes m$ to $xm/s$ as required.
  It just remains to be checked that $f$ is an isomorphism of $S\inv R$-modules.
  $f$ is additive by definition and it is clear that $f$ is $S\inv R$-linear since
  \[\frac{y}{t} f \left( \frac{x}{s} \otimes m \right) = \frac{yxm}{ts} = f \left( \frac{yx}{ts} \otimes m \right).\]
  To see that $f$ is surjective, note that for all $m \in M$ and $s \in S$ we have $f(1/s \otimes m) = m/s$.
  To see that $f$ is injective, let
  \[y = \sum_{i \text{ finite}} \frac{x_i}{s_i} \otimes m_i \in S\inv R \otimes_R M.\]
  Set $s=\prod_i s_i$ and $t_i = \prod_{j \neq i} s_j$.
  Then
  \[y = \sum_{i \text{ finite}} \frac{x_it_i}{s} \otimes m_i = \sum_{i \text{ finite}} \frac{1}{s} \otimes (x_it_im_i) = \frac{1}{s} \sum_{i \text{ finite}} (x_it_im_i) \defeq \frac{1}{s} \otimes m.\]
  where we have defined $m$ in the obvious way.

  Assume that $f(1/s \otimes m)=0$ ($\iff m/s=0$).
  Then there exists a $u \in S$ such that $u \cdot m = 0 \in M$.
  Then
  \[\frac{1}{s} \otimes m \frac{u}{us} \otimes m = \frac{1}{us} \otimes um = 0\]
  so $f$ is injective.
\end{proof}

